---
- name: Create ansible user and copy key generate for setup.sh
  hosts: deb-based
  become: true
  gather_facts: no
  pre_tasks:
  - name: Create a user ansible in ~ansible/
    ansible.builtin.user:
      name: ansible
      groups: sudo
      shell: /bin/bash
  - name: ansible create directory .ssh
    file:
      path: /home/ansible/.ssh
      state: directory
  - name: ensure private key and public one are present
    copy: 
      src: id_rsa.pub 
      dest: "/home/ansible/.ssh/{{ item }}" 
      mode: 0600
    with_items:
      - id_dsa.pub
